/* ======== Tema dark NEON ’70s (potenziato) ======== */
:root{
  --bg-0:#060913; --bg-1:#0b1022; --bg-2:#0d1430;
  --text:#e8f2ff; --muted:#9db0d9;
  --neon-cyan:#00e5ff; --neon-magenta:#ff3df7; --neon-amber:#ffd166; --neon-lime:#a4ff3f;
  --line-idle:#23315f; --line-hover:#3e57a3;
  --frame-1:#2e45aa; --frame-2:#9e36ff; --frame-3:#00e5ff;
  --radius-lg:16px; --radius-md:12px;
  --shadow-xl:0 20px 60px #000a; --shadow-lg:0 12px 34px #000a; --shadow-sm:0 6px 18px #0008;
}

*{box-sizing:border-box} html,body{height:100%;margin:0}
body{
  color:var(--text);
  font-family:'Archivo',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background: radial-gradient(1200px 800px at 70% 10%, #0c1330 0%, #090f26 45%, var(--bg-0) 100%), #080c19;
  overflow-x:hidden;
}
.app-header,.app-footer{text-align:center}
.app-header{padding:20px 10px 8px}
.neon-title{
  font-family:'Orbitron',system-ui,sans-serif;font-weight:700;letter-spacing:.04em;
  font-size:clamp(26px,4.2vw,44px);color:var(--neon-cyan);
  text-shadow:0 0 6px #00e5ffb3,0 0 18px #00e5ff80,0 0 36px #00e5ff55;margin:0 0 6px;
}
.subtitle{margin:0 0 12px;color:var(--muted)}
.neon-divider{height:2px;width:min(920px,92vw);margin:0 auto;background:linear-gradient(90deg,transparent 0%,var(--neon-magenta) 25%,var(--neon-cyan) 75%,transparent 100%);filter:drop-shadow(0 0 8px #00e5ff88) drop-shadow(0 0 10px #ff3df755)}
.neon-divider.small{width:min(640px,90vw);opacity:.8}

.panel{
  width:min(980px,94vw);margin:16px auto;border-radius:var(--radius-lg);padding:16px;position:relative;
  background:linear-gradient(180deg,var(--bg-2),var(--bg-1));border:1px solid #1d2b66;box-shadow:var(--shadow-lg);
}
.neon-card::before{
  content:'';position:absolute;inset:-2px;border-radius:inherit;
  background:conic-gradient(from 0deg,var(--frame-1),var(--frame-2),var(--frame-3),var(--frame-1));
  filter:blur(18px) saturate(1.2);opacity:.35;z-index:-1;
}
.panel-title{margin:0 0 12px;font-family:'Orbitron',system-ui,sans-serif;font-weight:700;letter-spacing:.02em;color:var(--neon-amber);text-shadow:0 0 8px #ffd16666,0 0 18px #ffd16633}

.row{display:grid;gap:12px;margin-bottom:12px}
.grid-2{grid-template-columns:1fr}
@media(min-width:760px){.grid-2{grid-template-columns:1fr 1fr}}
.players{grid-template-columns:1fr}
@media(min-width:740px){.players{grid-template-columns:1fr 1fr}}
.player-card{background:#0a1127;border:1px solid #20307a;border-radius:var(--radius-md);padding:12px;box-shadow:var(--shadow-sm)}
.neon-subcard{position:relative}
.neon-subcard::before{content:'';position:absolute;inset:-1px;border-radius:inherit;background:linear-gradient(90deg,#00e5ff44,#ff3df744);filter:blur(10px);opacity:.35;z-index:-1}
.player-card h3{margin:0 0 8px;font-weight:700}
.badge{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:baseline;box-shadow:0 0 10px currentColor}
.badge.p1{color:var(--neon-cyan);background:var(--neon-cyan)} .badge.p2{color:var(--neon-magenta);background:var(--neon-magenta)}
.field{display:grid;gap:6px;text-align:left}.label{color:#cfe0ff;font-weight:600}.help{color:var(--muted)}
input[type="text"],input[type="number"],input[type="color"]{width:100%;padding:10px 12px;background:#081024;color:var(--text);border:1px solid #23306a;border-radius:10px;outline:none;transition:border-color .2s,box-shadow .2s,background .2s}
input[type="text"]::placeholder{color:#7f94c7}
input[type="text"]:focus,input[type="number"]:focus,input[type="color"]:focus{border-color:var(--neon-cyan);box-shadow:0 0 14px #00e5ff44}
.actions{display:flex;gap:10px;justify-content:center;margin-top:6px}
.btn{appearance:none;border:1px solid #2b3b7f;color:var(--text);padding:12px 16px;background:#101a42;border-radius:12px;cursor:pointer;transition:transform .08s ease,box-shadow .2s,border-color .2s,background .2s;font-weight:600;letter-spacing:.02em}
.btn:hover{box-shadow:0 0 14px #ffffff22;border-color:#3a4faa}.btn:active{transform:translateY(1px)}
.btn.primary{background:radial-gradient(160px 80px at 70% 10%,#0ff 0%,#0af 60%,#013 100%);border-color:#2ae9ff;box-shadow:0 0 18px #00e5ff55}
.btn.ghost{background:transparent;border-color:#40519b;color:#bcd2ff}
.hint{color:var(--muted);text-align:center;margin:8px 0 0}

.topbar{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;margin-bottom:10px}
.controls{display:flex;gap:8px}
.turn-indicator{font-weight:700;color:#dce6ff}
.turn-indicator .who{padding:2px 10px;border-radius:999px;background:#0c1431;border:1px solid #22327a;text-shadow:0 0 10px currentColor}

/* Board */
.board-wrapper{position:relative;display:grid;place-items:center}
.board{
  width:min(92vw,78vh);aspect-ratio:1/1;display:grid;gap:0;user-select:none;touch-action:manipulation;border-radius:14px;
  background:radial-gradient(380px 220px at 50% 25%, #0c1431 0%, #0a1127 60%, #081022 100%);
  border:1px solid #1a2a66;box-shadow:inset 0 0 0 2px #15225a,var(--shadow-xl);
  opacity:0; transform:translateY(6px); transition:opacity .25s ease, transform .25s ease; /* enter */
}
.game-enter .board{opacity:1; transform:translateY(0)}
.board-glow{position:absolute;inset:-10px;border-radius:18px;background:conic-gradient(from 0deg,#00e5ff22,#ff3df722,#ffd16622,#00e5ff22);filter:blur(24px);z-index:-1;opacity:.5}

/* Dots */
.dot{display:grid;place-items:center}
.dot::before{
  content:'';width:48%;height:48%;border-radius:50%;
  background:radial-gradient(circle at 35% 35%, #fff, #cfe1ff);
  box-shadow:0 0 10px #b8d7ff,0 0 18px #8ab6ff88,0 0 36px #6aa7ff44;
}

/* Lines (with draw animation) */
.h-line,.v-line{position:relative;cursor:pointer}
.h-line::before,.v-line::before{
  content:'';position:absolute;inset:0;margin:auto;border-radius:12px;background:var(--line-idle);
  box-shadow:inset 0 0 6px #0009;transition:background .12s,box-shadow .12s,transform .18s ease-out,opacity .18s;
}
.h-line:hover::before,.v-line:hover::before{background:var(--line-hover);box-shadow:0 0 14px #7bb1ff33}
.h-line::before{width:78%;height:26%;transform-origin:left center;transform:scaleX(.15);opacity:.8}
.v-line::before{width:26%;height:78%;transform-origin:center top;transform:scaleY(.15);opacity:.8}

/* drawn → fill animate (scale to 1) with player color via --draw */
.h-line.drawn::before,.v-line.drawn::before{
  background:var(--draw,#39d2ff);
  box-shadow:0 0 10px color-mix(in srgb, var(--draw,#39d2ff) 60%, transparent), 0 0 24px color-mix(in srgb, var(--draw,#39d2ff) 30%, transparent);
  transform:scale(1); opacity:1;
}

/* Box */
.box{
  display:grid;place-items:center;border:1px dashed #1d2856;color:#fff;font-weight:800;letter-spacing:.03em;
  font-size:clamp(14px,3.2vw,28px);text-shadow:0 0 8px #ffffff33; position:relative;
}
.box.claimed{border:1px solid #314399;box-shadow:inset 0 0 22px #ffffff12, 0 0 12px #ffffff10;animation:pulse .22s ease-out}
@keyframes pulse{0%{transform:scale(.96)}100%{transform:scale(1)}}
.box .shine{content:'';position:absolute;inset:auto 8% 8% 8%;height:2px;background:linear-gradient(90deg,transparent, #fff9, transparent);filter:blur(2px);opacity:.0;animation:shine .4s ease-out forwards}
@keyframes shine{to{opacity:.25}}

/* Modal */
.modal{border:none;border-radius:14px;padding:16px;width:min(440px,92vw);background:linear-gradient(180deg,#0f1635 0%,#0b112b 100%);color:var(--text);box-shadow:var(--shadow-xl)}
.modal::backdrop{background:#0009;backdrop-filter:blur(2px)}
.modal h3.neon{margin-top:0;color:var(--neon-amber);text-shadow:0 0 10px #ffd16666,0 0 24px #ffd16633}
.score-content{display:grid;gap:8px;margin:10px 0 6px}
.score-line{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border:1px solid #26367c;border-radius:10px;background:#0a1127}
.score-dot{width:10px;height:10px;border-radius:50%;margin-right:8px;box-shadow:0 0 10px currentColor}
.modal-actions{display:flex;justify-content:flex-end;gap:8px}

.app-footer{padding:12px;color:var(--muted)}
:focus-visible{outline:2px solid var(--neon-lime);outline-offset:2px}